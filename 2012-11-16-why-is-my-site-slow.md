<!-- --- tag: faq 网络 网速 延迟 掉包 mtr -->
<!-- --- title: 为什么网站打开很慢? -->
#为什么网站打开很慢?
影响网速慢的问题错综复杂，不能一概而论。数据包在网络中传递过程中也会经过多个节点到达目的地，其中数据包通过何种协议或选择何种路径去往目的地都有关系（好比你开车去往目的地有多条路可到达，选择哪条线路，多少红灯，车辆拥堵都会影响到达目的地速度），数据包传递也是如此，整个过程不是谁或某个机构能完全控制的，即使相同地点在不同时间也会有不同的延时与丢包，今天ping反应情况是120ms，明天可能会340ms，所以数据在特定时间和环境才有参考价值。还有些其他因素诸如网页代码不优，被病毒攻击造成服务器负担等也会影响客户端访问速度。


##WinMTR/MTR
WinMTR/MTR这款工具是非常有用的工具，反应当时主机网络的延迟，跳点，丢包等情况。

我们重点关心的是数据包在我们线路上的情况，如果你一直认为网速慢和我们有关，请使用该工具提取数据报表附于工单提交向我们反应，我们工程师来分析是否在可控范围内作出优化线路等调整。

[下载WinMTR](http://downloads.sourceforge.net/project/winmtr/WinMTR-v092.zip?r=http%3A%2F%2Fsourceforge.net%2Fprojects%2Fwinmtr%2Ffiles%2F&ts=1353040732&use_mirror=jaist)


### 使用方法
1. 解压文件
2. 在 host输入: 51hosting.com (请用你要测试的网站的域名或者ip地址替换51hosting.com)
3. 点start后等5分钟
4. 选择Export to TEXT
5. 把导出报告提交工单附件中

#### WinMTR测试结果名词解释
1. Copy Text to clipboard   - 将结果以文本形式复制到剪贴板
2. Copy HTML to clipboard - 将结果以HTML形式复制到剪贴板
3. Export TEXT  - 将结果以文本形式导出
4. Export HTML - 将结果以HTML形式导出
5. Options - 设置 
6. Hostname:到目的服务器要经过的每个节点主机IP或名称 。
7. Nr:经过节点的数量;以上图洛杉矶美国机房为例子:一共要经过12个节点,其中第一个是当地宽带商的网关。
8. Loss%:ping 数据包回复失败的百分比;由此可判断那个节点(线路)出现故障,是服务器所在机房还是国际路由干路。 
9. Sent:已经传送的数据包数量 。
10. Recv:成功接收的数据包数量 。
11. Best:回应时间的最小值 。
12. Avrg:平均回应时间 。
13. Worst:回应时间的最大值。 
14. Last:最后一个数据包的回应时间。

##### 举例说明
1. WinMTR的使用方法如下：
双击WinMTR.exe运行，打开后，我们可以看到Host一栏的文本框，在Host文本框内输入您要追踪的IP或者域名，再按 Start ，此时就可以看到如下图所示的 tracert 与 Ping 的结果，图例如下：

<center>![](http://i1.51hosting.com/2013-12-25_12_43_winmtrtest.png)</center>

测试结束后，我们可以将结果导出：

Hostname：到目的服务器要经过的每个节点主机IP或名称 。

Nr：经过节点的数量；以上图洛杉矶美国KT机房为例子：一共要经过12个节点，其中第一个是当地宽带商的网关。

Loss%：ping 数据包回复失败的百分比；由此可判断那个节点（线路）出现故障，是服务器所在机房还是国际路由干路。 (其中图中倒数第2跳显示100%丢失，那是正常的因为有些节点禁ping后是无法取得数据的。

Sent：已经传送的数据包数量

Recv：成功接收的数据包数量

Best：回应时间的最小值

Avrg：平均回应时间

Worst：回应时间的最大值

Last：最后一个数据包的回应时间

##### 分析WINMTR/MTR报告

验证数据包丢失

在分析WINMTR/MTR输出结果时，您需要查看两件事情：丢包和延迟。首先，我们来讨论丢包。如果您在任何一个节点看到有掉包，这可能表示这个特定的路由节点有问题。然而，有些服务提供商会限制WINMTR/MTR工具发送的ICMP传输。这会对数据包丢失造成错觉，但事实上并未丢包。要确认您看到的数据包丢失是否是由于服务提供商限制造成的，您可以查看随后的一跳路由节点。如果该跳显示丢失0%，那么您可以肯定
是ICMP限制，实际未丢包。
看下面的例子：
root@localhost:~# mtr --report www.google.com
HOST: ducklington               Loss%   Snt   Last   Avg  Best  Wrst StDev
1. 63.247.74.43                  0.0%    10    0.3   0.6   0.3   1.2   0.3
2. 63.247.64.157                50.0%    10    0.4   1.0   0.4   6.1   1.8
3. 209.51.130.213                0.0%    10    0.8   2.7   0.8  19.0   5.7
4. aix.pr1.atl.google.com        0.0%    10    6.7   6.8   6.7   6.9   0.1
5. 72.14.233.56                  0.0%    10    7.2   8.3   7.1  16.4   2.9
6. 209.85.254.247                0.0%    10   39.1  39.4  39.1  39.7   0.2
7. 64.233.174.46                 0.0%    10   39.6  40.4  39.4  46.9   2.3
8. gw-in-f147.1e100.net          0.0%    10   39.6  40.5  39.5  46.7   2.2